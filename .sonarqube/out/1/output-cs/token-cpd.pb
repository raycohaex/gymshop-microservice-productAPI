›#
tD:\School\semester3\eigenproject\docker-dotnet-sql-test1\GymShopAPI\GymShopAPI.BBL\Controllers\ProductsController.cs
	namespace 	

GymShopAPI
 
. 
BLL 
. 
Controllers $
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
ProductsController #
:$ %
ControllerBase& 4
{ 
private 
readonly 
IProductsDbAccess *
_ProductsDbAccess+ <
;< =
public 
ProductsController !
(! "
IProductsDbAccess" 3
ProductsDbAccess4 D
)D E
{ 	
_ProductsDbAccess 
= 
ProductsDbAccess  0
;0 1
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
Product !
[! "
]" #
># $
GetAllProducts% 3
(3 4
[4 5
	FromQuery5 >
]> ?"
ProductQueryParameters@ V
queryParametersW f
)f g
{ 	
return 
await 
_ProductsDbAccess *
.* +
GetAllProducts+ 9
(9 :
queryParameters: I
)I J
;J K
} 	
["" 	
HttpGet""	 
("" 
$str"" 
)"" 
]"" 
public## 
async## 
Task## 
<## 
ActionResult## &
<##& '
Product##' .
>##. /
>##/ 0

GetProduct##1 ;
(##; <
int##< ?
id##@ B
)##B C
{$$ 	
return%% 
await%% 
_ProductsDbAccess%% *
.%%* +

GetProduct%%+ 5
(%%5 6
id%%6 8
)%%8 9
;%%9 :
}&& 	
[(( 	
HttpPost((	 
](( 
public)) 
async)) 
Task)) 
<)) 
ActionResult)) &
<))& '
Product))' .
>)). /
>))/ 0
PostProduct))1 <
())< =
[))= >
FromBody))> F
]))F G
Product))H O
product))P W
)))W X
{** 	
await++ 
_ProductsDbAccess++ #
.++# $
PostProduct++$ /
(++/ 0
product++0 7
)++7 8
;++8 9
return-- 
CreatedAtAction-- "
(--" #
$str.. 
,.. 
new// 
{// 
id// 
=// 
product// "
.//" #
Id//# %
}//& '
,//' (
product00 
)11 
;11 
}22 	
[44 	
HttpPut44	 
(44 
$str44 
)44 
]44 
public55 
async55 
Task55 
<55 
IActionResult55 '
>55' (

PutProduct55) 3
(553 4
[554 5
	FromRoute555 >
]55> ?
int55@ C
id55D F
,55F G
[55H I
FromBody55I Q
]55Q R
Product55S Z
product55[ b
)55b c
{66 	
if77 
(77 
id77 
!=77 
product77 
.77 
Id77  
)77  !
{88 
return99 

BadRequest99 !
(99! "
)99" #
;99# $
}:: 
await<< 
_ProductsDbAccess<< #
.<<# $

PutProduct<<$ .
(<<. /
id<</ 1
,<<1 2
product<<3 :
)<<: ;
;<<; <
return== 
Ok== 
(== 
product== 
)== 
;== 
}>> 	
[@@ 	

HttpDelete@@	 
(@@ 
$str@@ 
)@@ 
]@@ 
publicAA 
asyncAA 
TaskAA 
<AA 
ActionResultAA &
<AA& '
ProductAA' .
>AA. /
>AA/ 0
DeleteProductAA1 >
(AA> ?
intAA? B
idAAC E
)AAE F
{BB 	
returnCC 
awaitCC 
_ProductsDbAccessCC *
.CC* +
DeleteProductCC+ 8
(CC8 9
idCC9 ;
)CC; <
;CC< =
}DD 	
}EE 
}FF Õ

]D:\School\semester3\eigenproject\docker-dotnet-sql-test1\GymShopAPI\GymShopAPI.BBL\Program.cs
	namespace

 	

GymShopAPI


 
.

 
BLL

 
{ 
public 

class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{ 	
CreateHostBuilder 
( 
args "
)" #
.# $
Build$ )
() *
)* +
.+ ,
Run, /
(/ 0
)0 1
;1 2
} 	
public 
static 
IHostBuilder "
CreateHostBuilder# 4
(4 5
string5 ;
[; <
]< =
args> B
)B C
=>D F
Host 
.  
CreateDefaultBuilder %
(% &
args& *
)* +
. $
ConfigureWebHostDefaults )
() *

webBuilder* 4
=>5 7
{ 

webBuilder 
. 

UseStartup )
<) *
Startup* 1
>1 2
(2 3
)3 4
;4 5
} 
) 
; 
} 
} ª
]D:\School\semester3\eigenproject\docker-dotnet-sql-test1\GymShopAPI\GymShopAPI.BBL\Startup.cs
	namespace 	

GymShopAPI
 
. 
BLL 
{ 
public 

class 
Startup 
{ 
public 
Startup 
( 
IConfiguration %
configuration& 3
)3 4
{ 	
Configuration 
= 
configuration )
;) *
} 	
public 
IConfiguration 
Configuration +
{, -
get. 1
;1 2
}3 4
public 
void 
ConfigureServices %
(% &
IServiceCollection& 8
services9 A
)A B
{ 	
services   
.   
	AddScoped   
<   
IProductsDbAccess   0
,  0 1
ProductsDbAccess  2 B
>  B C
(  C D
)  D E
;  E F
services!! 
.!! 
AddDbContext!! !
<!!! "
ShopContext!!" -
>!!- .
(!!. /
options"" 
=>"" 
options"" "
.""" #
UseMySql""# +
(""+ ,
Configuration"", 9
.""9 :
GetConnectionString"": M
(""M N
$str""N b
)""b c
)""c d
)## 
;## 
services%% 
.%% 
AddControllers%% #
(%%# $
)%%$ %
;%%% &
services&& 
.&& 
	AddScoped&& 
<&& 
ShopContext&& *
>&&* +
(&&+ ,
)&&, -
;&&- .
}'' 	
public** 
void** 
	Configure** 
(** 
IApplicationBuilder** 1
app**2 5
,**5 6
IWebHostEnvironment**7 J
env**K N
)**N O
{++ 	
if,, 
(,, 
env,, 
.,, 
IsDevelopment,, !
(,,! "
),," #
),,# $
{-- 
app.. 
... %
UseDeveloperExceptionPage.. -
(..- .
)... /
;../ 0
}// 
app11 
.11 
UseHttpsRedirection11 #
(11# $
)11$ %
;11% &
app33 
.33 

UseRouting33 
(33 
)33 
;33 
app55 
.55 
UseAuthorization55  
(55  !
)55! "
;55" #
app77 
.77 
UseEndpoints77 
(77 
	endpoints77 &
=>77' )
{88 
	endpoints99 
.99 
MapControllers99 (
(99( )
)99) *
;99* +
}:: 
):: 
;:: 
};; 	
}<< 
}== 